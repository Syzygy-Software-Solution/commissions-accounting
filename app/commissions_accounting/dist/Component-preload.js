//@ui5-bundle commissionsaccounting/Component-preload.js
sap.ui.predefine("commissionsaccounting/Component", ["sap/ui/core/UIComponent","commissionsaccounting/model/models"],(e,i)=>{"use strict";return e.extend("commissionsaccounting.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(i.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("commissionsaccounting/controller/App.controller", ["sap/ui/core/mvc/Controller"],n=>{"use strict";return n.extend("commissionsaccounting.controller.App",{onInit(){}})});
sap.ui.predefine("commissionsaccounting/controller/Main.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox","sap/ui/core/BusyIndicator","sap/ui/core/Fragment","sap/m/Column","sap/m/Text","sap/m/Input","sap/m/ColumnListItem","sap/m/ComboBox"],(e,t,o,a,s,r,n,i,l,c,d)=>{"use strict";return e.extend("commissionsaccounting.controller.Main",{async onInit(){const e=new t({overview:[],schedule:[],setupForm:{selectedProduct:null,capPercent:null,paymentStartDate:null},currentSetups:[],selectedSetupIndex:undefined});this.getView().setModel(e);var o=new t([]);this.getView().setModel(o,"currentSetups");var a=new t([]);this.getView().setModel(a,"scheduleData");var s=new t([]);this.getView().setModel(s,"overviewData");var r=new t([]);this.getView().setModel(r,"periodsData");var n=new t([]);this.getView().setModel(n,"productIds");var i=new t([]);this.getView().setModel(i,"dataSources");var l=new t([]);this.getView().setModel(l,"tableNames");var c=new t([]);this.getView().setModel(c,"columnConfig");await Promise.all([this.getAllPeriods(),this.getActiveDataSourceMappings()]);this._loadSheetJS();this._oSelectedFile=null;this._dropdownCache={}},_loadSheetJS(){if(!window.XLSX){const e=document.createElement("script");e.src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js";e.async=true;e.onload=()=>{console.log("SheetJS library loaded successfully")};e.onerror=()=>{console.error("Failed to load SheetJS library")};document.head.appendChild(e)}},onToggleMenuPress(e){const t=this.getView().byId("idToolPage");var o=t.getSideExpanded();t.setSideExpanded(!t.getSideExpanded())},async onSideNavItemSelect(e){const t=e.getParameter("item").getKey();switch(t){case"amortizationDetails":break;case"configAmortization":s.show();await this.getActiveDataSourceMappings();s.hide();break;default:break}this.getView().byId("idNavContainer").to(this.getView().createId(t))},async onConfigSubSectionChange(e){const t=e.getParameter("subSection");const o=t.getParent().getTitle();if(o==="Data Source Mapping"){s.show();const e=this.getView().getModel("dataSources");const t=this.getView().getModel("tableNames");const o=e.getData();const a=t.getData();const r=[];if(!a||a.length===0){r.push(this.getDataSourceTables())}if(!o||o.length===0){r.push(this.getDataSourceMappings())}else{r.push(this._loadMissingFieldNames(o))}await Promise.all(r);s.hide()}},async _loadMissingFieldNames(e){const t=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.tcmp.uri);const o=this.getView().getModel("dataSources");const a=e.map(async(e,a)=>{if(e.tableName&&(!e._fieldNames||e._fieldNames.length===0)){try{const s=await fetch(`${t}/V_CS_TABLE_COLUMNS/V_CS_TABLE_COLUMNS?$filter=TABLE_NAME eq '${e.tableName}'`);if(s.ok){const e=await s.json();const t=e.value||[];o.setProperty(`/${a}/_fieldNames`,t)}}catch(t){console.error(`Error loading field names for ${e.tableName}:`,t)}}});await Promise.all(a);if(a.length>0){o.refresh()}},async getDataSourceTables(){const e=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.tcmp.uri);try{const t=await fetch(`${e}/V_CS_TABLES/V_CS_TABLES`);if(!t.ok){throw new Error("Network response was not ok")}const o=await t.json();const a=o.value||[];const s=["CS_SALESTRANSACTION","CS_TRANSACTIONASSIGNMENT","CS_COMMISSION","CS_CREDIT","CS_INCENTIVE","CS_MEASUREMENT","CS_PARTICIPANT","CS_POSITION","CS_TITLE"];const r=a.filter(e=>s.includes(e.TABLE_NAME));const n=this.getView().getModel("tableNames");n.setSizeLimit(r.length);n.setData(r)}catch(e){a.error("Error fetching tables: "+e.message);console.error("Error fetching tables:",e)}},async getDataSourceMappings(){const e=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);s.show(0);try{const t=await fetch(`${e}/DataSourceMappings`);if(!t.ok){throw new Error("Network response was not ok")}const a=await t.json();let s=a.value||[];s.sort((e,t)=>(e.position||0)-(t.position||0));s.forEach(e=>{e._fieldNames=[]});const r=this.getView().getModel("dataSources");r.setSizeLimit(999999);r.setData(s);await this._loadFieldNamesForAllRows(s);this.getView().getModel("dataSources").refresh();o.show("Data source mappings loaded successfully")}catch(e){a.error("Error fetching data source mappings: "+e.message);console.error("Error fetching data source mappings:",e)}finally{s.hide()}},async onTableNameChange(e){const t=e.getSource();const o=t.getSelectedKey();const r=t.getBindingContext("dataSources");if(!o){return}s.show(0);const n=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.tcmp.uri);try{const e=await fetch(`${n}/V_CS_TABLE_COLUMNS/V_CS_TABLE_COLUMNS?$filter=TABLE_NAME eq '${o}'`);if(!e.ok){throw new Error("Network response was not ok")}const t=await e.json();const a=t.value||[];const s=this.getView().getModel("dataSources");const i=r.getPath();s.setProperty(i+"/_fieldNames",a)}catch(e){a.error("Error fetching field names: "+e.message);console.error("Error fetching field names:",e)}finally{s.hide()}},async _loadFieldNamesForAllRows(e){const t=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.tcmp.uri);const o=this.getView().getModel("dataSources");const a=e.map(async(e,a)=>{if(e.tableName&&(!e._fieldNames||e._fieldNames.length===0)){try{const s=await fetch(`${t}/V_CS_TABLE_COLUMNS/V_CS_TABLE_COLUMNS?$filter=TABLE_NAME eq '${e.tableName}'`);if(s.ok){const e=await s.json();const t=e.value||[];o.setProperty(`/${a}/_fieldNames`,t)}}catch(t){console.error(`Error loading field names for ${e.tableName}:`,t)}}});await Promise.all(a)},async onSaveDataSourceMapping(){s.show(0);try{const e=this.getView().getModel("dataSources");const t=e.getData();const r=t.some(e=>e.isActive);if(!r){a.warning("Please activate at least one field before saving.");s.hide();return}const n=new Map;const i=[];for(let e=0;e<t.length;e++){const o=t[e];const a=parseInt(o.position,10);if(!isNaN(a)){if(n.has(a)){i.push(a)}else{n.set(a,e)}}}if(i.length>0){a.error(`Duplicate positions found: ${[...new Set(i)].join(", ")}. Each column must have a unique position.`);s.hide();return}const l=t.map(e=>{const t=parseInt(e.position,10);return{columnKey:e.columnKey,columnName:e.columnName,defaultLabel:e.defaultLabel,customLabel:e.customLabel||null,position:!isNaN(t)?t:null,tableName:e.tableName||null,fieldName:e.fieldName||null,isActive:e.isActive||false,connectViaAPI:false}});const c=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);const d=await fetch(`${c}/saveDataSourceMappings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mappingData:l})});if(!d.ok){throw new Error(`HTTP error! status: ${d.status}`)}const p=await d.json();o.show("Data source mappings saved successfully")}catch(e){a.error(`Failed to save data source mappings: ${e.message}`)}finally{s.hide()}},async onUploadPress(){if(!this._pUploadDialog){this._pUploadDialog=r.load({id:this.getView().getId(),name:"commissionsaccounting.view.fragments.UploadDialog",controller:this}).then(e=>{this.getView().addDependent(e);return e})}const e=await this._pUploadDialog;e.open()},onFileSelect(e){const t=e.getSource();const o=e.getParameter("files")&&e.getParameter("files")[0];if(o){this._oSelectedFile=o}else{this._oSelectedFile=null}},async onUploadFile(){if(!this._oSelectedFile){a.warning("Please select a file to upload");return}if(!this._oSelectedFile.name.match(/\.(xlsx|xls)$/)){a.error("Please upload a valid Excel file (.xlsx or .xls)");return}if(!window.XLSX){a.error("Excel processing library is still loading. Please try again in a moment.");return}s.show(0);try{const e=await this._readFileAsArrayBuffer(this._oSelectedFile);const t=XLSX.read(new Uint8Array(e),{type:"array"});const s=t.Sheets[t.SheetNames[0]];const r=XLSX.utils.sheet_to_json(s);if(r.length===0){a.warning("The uploaded Excel file is empty");return}const n=["PayeeId","Total Incentive","Product","Cap %","Term","Payment Frequency","Payment Start Date"];const i=r[0];const l=n.filter(e=>!(e in i));if(l.length>0){a.error(`Missing required columns: ${l.join(", ")}`);return}const c=this.getView().getModel();c.setProperty("/overview",r);const d=[...new Set(r.map(e=>e.PayeeId))].filter(Boolean);const p=d.map(e=>({id:e}));c.setProperty("/payeeIds",p);const u=[...new Set(r.map(e=>e.Product))].filter(Boolean);const h=u.map(e=>({id:e}));c.setProperty("/products",h);c.setProperty("/setupForm",{selectedProduct:null,capPercent:null,paymentStartDate:null});o.show(`Successfully loaded ${r.length} record(s)`);this._calculateAmortizationSchedule(r);this.onCloseUploadDialog()}catch(e){a.error("Error parsing Excel file: "+e.message)}finally{s.hide()}},onCloseUploadDialog(){this._pUploadDialog.then(e=>{e.close();const t=this.byId("fileUploader");if(t){t.clear()}this._oSelectedFile=null})},_readFileAsArrayBuffer(e){return new Promise((t,o)=>{const a=new FileReader;a.onload=e=>t(e.target.result);a.onerror=e=>o(new Error("Error reading file"));a.readAsArrayBuffer(e)})},_calculateAmortizationSchedule(e){const t=this.getView().getModel();const o=[];e.forEach(e=>{try{const t=e.PayeeId||"";const a=e.Product||"";const s=parseFloat(e["Total Incentive"])||0;const r=parseFloat(e["Cap %"])||100;const n=parseInt(e["Term"])||12;let i;if(e["Payment Start Date"]){if(typeof e["Payment Start Date"]==="number"){i=this._excelDateToJSDate(e["Payment Start Date"])}else{i=new Date(e["Payment Start Date"])}}else{i=new Date}const l=e["Payment Frequency"]||"Monthly";const c={Monthly:1,Quarterly:3,"Bi-Weekly":2,"Semi-Annually":6,Annually:12}[l]||1;const d=Math.floor(n/c);const p=s*(r/100);const u=p/d;let h=new Date(i);for(let e=1;e<=d;e++){o.push({PayeeId:t,Product:a,Installment:e,PaymentDate:this._formatDate(h),PaymentAmount:this._formatCurrency(u)});h=this._addMonths(h,c)}}catch(t){console.error("Error calculating amortization for record:",e,t)}});const a=this.getView().getModel("scheduleData");a.setData(o);t.setProperty("/scheduleOriginal",null);t.setProperty("/isFiltered",false);t.setProperty("/currentFilter",null)},async onDownloadTemplatePress(){if(!window.XLSX){a.error("Excel processing library is still loading. Please try again in a moment.");return}try{s.show(0);const e=[{PayeeId:"",Product:"","Total Incentive":"","Cap %":"",Term:"","Payment Frequency":"","Payment Start Date":"",Plan:"","Data Type":"","Data Type Name":"","Account Type":"","Payroll Classification":"","Expense Start Date":"","Expense End Date":"",Notes:""}];const t=XLSX.utils.json_to_sheet(e);const a=XLSX.utils.book_new();XLSX.utils.book_append_sheet(a,t,"Template");t["!cols"]=[{wch:15},{wch:15},{wch:18},{wch:10},{wch:10},{wch:20},{wch:20},{wch:15},{wch:15},{wch:18},{wch:15},{wch:22},{wch:20},{wch:20},{wch:30}];XLSX.writeFile(a,"Commissions_Template.xlsx");o.show("Template downloaded successfully")}catch(e){a.error("Error generating template: "+e.message)}finally{s.hide()}},async onDownloadSetupTemplatePress(){if(!window.XLSX){a.error("Excel processing library is still loading. Please try again in a moment.");return}const e=this.getView().getModel("columnConfig").getData();if(!e||e.length===0){a.warning("Please configure data source mappings first.");return}s.show(0);try{const t={};e.forEach(e=>{t[e.columnName]=""});const a=[t];const s=XLSX.utils.json_to_sheet(a);s["!cols"]=e.map(()=>({wch:20}));const r=XLSX.utils.book_new();XLSX.utils.book_append_sheet(r,s,"Setup Template");XLSX.writeFile(r,"Setup_Template.xlsx");o.show("Setup template downloaded successfully")}catch(e){a.error("Error generating template: "+e.message)}finally{s.hide()}},async onDownloadAmortizationTemplatePress(){if(!window.XLSX){a.error("Excel processing library is still loading. Please try again in a moment.");return}s.show(0);try{const e=[{payeeId:"",orderId:"",product:"",totalIncentive:""}];const t=XLSX.utils.json_to_sheet(e);t["!cols"]=[{wch:15},{wch:15},{wch:15},{wch:20}];const a=XLSX.utils.book_new();XLSX.utils.book_append_sheet(a,t,"Amortization Template");XLSX.writeFile(a,"Amortization_Template.xlsx");o.show("Amortization template downloaded successfully")}catch(e){a.error("Error generating template: "+e.message)}finally{s.hide()}},onDownloadSchedulePress(){if(!window.XLSX){a.error("Excel processing library is still loading. Please try again in a moment.");return}const e=this.getView().getModel("scheduleData");const t=e.getData();if(!t||t.length===0){a.warning("No schedule data available to download");return}try{s.show(0);const e=XLSX.utils.json_to_sheet(t);const a=XLSX.utils.book_new();XLSX.utils.book_append_sheet(a,e,"Amortization Schedule");e["!cols"]=[{wch:15},{wch:15},{wch:18},{wch:18}];const r=(new Date).toISOString().split("T")[0];const n=`Amortization_Schedule_${r}.xlsx`;XLSX.writeFile(a,n);o.show(`Successfully downloaded ${t.length} record(s)`)}catch(e){a.error("Error generating Excel file: "+e.message)}finally{s.hide()}},_excelDateToJSDate(e){const t=24*60*60*1e3;const o=e>59?1:0;const a=new Date((e-25569+o)*t);return a},_addMonths(e,t){const o=new Date(e);o.setMonth(o.getMonth()+t);return o},_formatDate(e){const t=e.getFullYear();const o=String(e.getMonth()+1).padStart(2,"0");const a=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${a}`},_formatCurrency(e){return Math.round(e*100)/100},async onExecuteAmortizationPress(){s.show(0);try{const e=[{payeeId:"EMP-101",orderId:"1000234",product:"Cloud",totalIncentive:12e3},{payeeId:"EMP-101",orderId:"1000234",product:"On-Prem",totalIncentive:12e3},{payeeId:"EMP-101",orderId:"1000235",product:"Cloud",totalIncentive:1e4},{payeeId:"EMP-102",orderId:"1000236",product:"Cloud",totalIncentive:15e3}];const t=this.getView().getModel("currentSetups");const r=t.getData()||[];if(r.length===0){a.warning("No setup data available. Please add setup configurations first.");s.hide();return}const n=this._executeAmortizationCalculation(e,r);const i=this._prepareOverviewData(e,r);const l=this.getView().getModel("scheduleData");l.setData(n);const c=this.getView().getModel("overviewData");c.setData(i);const d=this.getView().getModel();d.setProperty("/scheduleOriginal",null);d.setProperty("/overviewOriginal",null);d.setProperty("/isFiltered",false);d.setProperty("/currentFilter",null);const p=[...new Set(n.map(e=>e.PayeeId))].filter(Boolean);const u=p.map(e=>({id:e}));d.setProperty("/schedulePayeeIds",u);const h=[...new Set(n.map(e=>e.Product))].filter(Boolean);const g=h.map(e=>({id:e}));d.setProperty("/scheduleProducts",g);const y=[...new Set(n.map(e=>e["Payroll Classification"]))].filter(Boolean);const m=y.map(e=>({id:e}));d.setProperty("/schedulePayrollClassifications",m);const f=[...new Set(i.map(e=>e.PayeeId))].filter(Boolean);const w=f.map(e=>({id:e}));d.setProperty("/overviewPayeeIds",w);const S=[...new Set(i.map(e=>e.Product))].filter(Boolean);const P=S.map(e=>({id:e}));d.setProperty("/overviewProducts",P);const v=[...new Set(i.map(e=>e["Payroll Classification"]))].filter(Boolean);const D=v.map(e=>({id:e}));d.setProperty("/overviewPayrollClassifications",D);const I=this.byId("schedulePayeeFilter");if(I){I.setSelectedKeys([])}const _=this.byId("scheduleProductFilter");if(_){_.setSelectedKeys([])}const C=this.byId("schedulePayrollClassificationFilter");if(C){C.setSelectedKeys([])}const b=this.byId("overviewPayeeFilter");if(b){b.setSelectedKeys([])}const E=this.byId("overviewProductFilter");if(E){E.setSelectedKeys([])}const F=this.byId("overviewPayrollClassificationFilter");if(F){F.setSelectedKeys([])}o.show(`Amortization executed successfully: ${n.length} schedule entries and ${i.length} overview records`)}catch(e){a.error("Error executing amortization: "+e.message)}finally{s.hide()}},async onUploadAmortizationDataPress(){if(!this._pUploadAmortizationDialog){this._pUploadAmortizationDialog=r.load({id:this.getView().getId(),name:"commissionsaccounting.view.fragments.UploadAmortizationDialog",controller:this}).then(e=>{this.getView().addDependent(e);return e})}const e=await this._pUploadAmortizationDialog;e.open()},onAmortizationFileSelect(e){const t=e.getParameter("files")&&e.getParameter("files")[0];if(t){this._oSelectedAmortizationFile=t}else{this._oSelectedAmortizationFile=null}},async onUploadAmortizationFile(){if(!this._oSelectedAmortizationFile){a.warning("Please select a file to upload");return}if(!this._oSelectedAmortizationFile.name.match(/\.(xlsx|xls)$/)){a.error("Please upload a valid Excel file (.xlsx or .xls)");return}if(!window.XLSX){a.error("Excel processing library is still loading. Please try again in a moment.");return}s.show(0);try{const e=await this._readFileAsArrayBuffer(this._oSelectedAmortizationFile);const t=XLSX.read(new Uint8Array(e),{type:"array"});const r=t.Sheets[t.SheetNames[0]];const n=XLSX.utils.sheet_to_json(r);if(n.length===0){a.error("The uploaded file is empty");s.hide();return}const i=["payeeId","orderId","product","totalIncentive"];const l=n[0];const c=i.filter(e=>!(e in l));if(c.length>0){a.error(`Missing required columns: ${c.join(", ")}`);s.hide();return}for(let e=0;e<n.length;e++){const t=n[e];if(!t.payeeId||!t.orderId||!t.product||!t.totalIncentive){a.error(`Row ${e+2}: All fields are required (payeeId, orderId, product, totalIncentive)`);s.hide();return}if(isNaN(parseFloat(t.totalIncentive))||parseFloat(t.totalIncentive)<=0){a.error(`Row ${e+2}: totalIncentive must be a valid positive number`);s.hide();return}}this.onCloseUploadAmortizationDialog();o.show(`Successfully loaded ${n.length} record(s)`);const d=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);const p=await fetch(`${d}/AmortizationSetups`);const u=await p.json();const h=u.value||[];if(h.length===0){a.warning("No setup configuration found. Please add setup data before executing amortization.");s.hide();return}const g=n.map(e=>({payeeId:e.payeeId,orderId:e.orderId,product:e.product,totalIncentive:parseFloat(e.totalIncentive)}));const y=this._executeAmortizationCalculation(g,h);const m=this._prepareOverviewData(g,h);const f=this.getView().getModel("scheduleData");f.setData(y);const w=this.getView().getModel("overviewData");w.setData(m);const S=this.getView().getModel();S.setProperty("/scheduleOriginal",null);S.setProperty("/overviewOriginal",null);S.setProperty("/isFiltered",false);S.setProperty("/currentFilter",null);const P=[...new Set(y.map(e=>e.PayeeId))].filter(Boolean);const v=P.map(e=>({id:e}));S.setProperty("/schedulePayeeIds",v);const D=[...new Set(y.map(e=>e.Product))].filter(Boolean);const I=D.map(e=>({id:e}));S.setProperty("/scheduleProducts",I);const _=[...new Set(y.map(e=>e["Payroll Classification"]))].filter(Boolean);const C=_.map(e=>({id:e}));S.setProperty("/schedulePayrollClassifications",C);const b=[...new Set(m.map(e=>e.PayeeId))].filter(Boolean);const E=b.map(e=>({id:e}));S.setProperty("/overviewPayeeIds",E);const F=[...new Set(m.map(e=>e.Product))].filter(Boolean);const M=F.map(e=>({id:e}));S.setProperty("/overviewProducts",M);const N=[...new Set(m.map(e=>e["Payroll Classification"]))].filter(Boolean);const T=N.map(e=>({id:e}));S.setProperty("/overviewPayrollClassifications",T);const A=this.byId("schedulePayeeFilter");if(A){A.setSelectedKeys([])}const O=this.byId("scheduleProductFilter");if(O){O.setSelectedKeys([])}const V=this.byId("schedulePayrollClassificationFilter");if(V){V.setSelectedKeys([])}const x=this.byId("overviewPayeeFilter");if(x){x.setSelectedKeys([])}const $=this.byId("overviewProductFilter");if($){$.setSelectedKeys([])}const B=this.byId("overviewPayrollClassificationFilter");if(B){B.setSelectedKeys([])}o.show(`Amortization executed successfully: ${y.length} schedule entries and ${m.length} overview records`)}catch(e){a.error("Error parsing Excel file: "+e.message)}finally{s.hide()}},onCloseUploadAmortizationDialog(){this._pUploadAmortizationDialog.then(e=>{e.close();const t=this.byId("amortizationFileUploader");if(t){t.clear()}this._oSelectedAmortizationFile=null})},async onRefreshSchedule(){const e=this.getView().getModel("scheduleData");const t=this.getView().getModel("overviewData");const r=this.getView().getModel();const n=e.getData();const i=t.getData();if((!n||n.length===0)&&(!i||i.length===0)){a.warning("No data to refresh. Please execute amortization or upload data first.");return}s.show(0);try{const l=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);const c=await fetch(`${l}/AmortizationSetups`);const d=await c.json();const p=d.value||[];if(p.length===0){a.warning("No setup configuration found. Please add setup data before refreshing.");s.hide();return}let u=[];if(i&&i.length>0){u=i.map(e=>({payeeId:e.PayeeId,orderId:e.OrderId||"",product:e.Product,totalIncentive:parseFloat(e["Total Incentive"])||0}))}else if(n&&n.length>0){const e=new Map;n.forEach(t=>{const o=`${t.PayeeId}-${t.OrderId}-${t.Product}`;if(!e.has(o)){e.set(o,{payeeId:t.PayeeId,orderId:t.OrderId||"",product:t.Product,totalIncentive:parseFloat(t["Total Incentive"])||0})}});u=Array.from(e.values())}if(u.length===0){a.warning("Unable to extract payee data for refresh. Please re-execute amortization.");s.hide();return}const h=this._executeAmortizationCalculation(u,p);const g=this._prepareOverviewData(u,p);e.setData(h);t.setData(g);r.setProperty("/scheduleOriginal",null);r.setProperty("/overviewOriginal",null);r.setProperty("/isFiltered",false);r.setProperty("/currentFilter",null);const y=[...new Set(h.map(e=>e.PayeeId))].filter(Boolean);const m=y.map(e=>({id:e}));r.setProperty("/schedulePayeeIds",m);const f=[...new Set(h.map(e=>e.Product))].filter(Boolean);const w=f.map(e=>({id:e}));r.setProperty("/scheduleProducts",w);const S=[...new Set(h.map(e=>e["Payroll Classification"]))].filter(Boolean);const P=S.map(e=>({id:e}));r.setProperty("/schedulePayrollClassifications",P);const v=[...new Set(g.map(e=>e.PayeeId))].filter(Boolean);const D=v.map(e=>({id:e}));r.setProperty("/overviewPayeeIds",D);const I=[...new Set(g.map(e=>e.Product))].filter(Boolean);const _=I.map(e=>({id:e}));r.setProperty("/overviewProducts",_);const C=[...new Set(g.map(e=>e["Payroll Classification"]))].filter(Boolean);const b=C.map(e=>({id:e}));r.setProperty("/overviewPayrollClassifications",b);const E=this.byId("schedulePayeeFilter");if(E){E.setSelectedKeys([])}const F=this.byId("scheduleProductFilter");if(F){F.setSelectedKeys([])}const M=this.byId("schedulePayrollClassificationFilter");if(M){M.setSelectedKeys([])}const N=this.byId("overviewPayeeFilter");if(N){N.setSelectedKeys([])}const T=this.byId("overviewProductFilter");if(T){T.setSelectedKeys([])}const A=this.byId("overviewPayrollClassificationFilter");if(A){A.setSelectedKeys([])}o.show(`Data refreshed successfully: ${h.length} schedule entries and ${g.length} overview records`)}catch(e){a.error("Error refreshing data: "+e.message)}finally{s.hide()}},_executeAmortizationCalculation(e,t){const o=[];e.forEach(e=>{try{const a=t.find(t=>t.product===e.product);if(!a){console.warn(`No setup found for product: ${e.product}. Skipping this record.`);return}const s=e.payeeId||"";const r=e.orderId||"";const n=e.product||"";const i=parseFloat(e.totalIncentive)||0;const l=parseFloat(a.capPercent)||100;const c=parseInt(a.term)||12;const d=a.paymentFrequency||"Monthly";const p=a.payrollClassification||"";let u;if(a.paymentStartDate){if(typeof a.paymentStartDate==="number"){u=this._excelDateToJSDate(a.paymentStartDate)}else{u=new Date(a.paymentStartDate)}}else{u=new Date}if(p==="Non-Deferred"){const e=i*(l/100);o.push({PayeeId:s,OrderId:r,Product:n,"Total Incentive":this._formatCurrency(e),"Cap %":l,Term:0,"Payment Frequency":"One-time","Payment Start Date":this._formatDate(u),Plan:"","Data Type":"","Data Type Name":"","Account Type":"","Payroll Classification":p,Notes:"Non-Deferred Payment"})}else{const e={Monthly:1,Quarterly:3,"Bi-Weekly":2,"Semi-Annually":6,Annually:12}[d]||1;const t=Math.floor(c/e);const a=i*(l/100);const h=a/t;let g=new Date(u);for(let a=1;a<=t;a++){o.push({PayeeId:s,OrderId:r,Product:n,"Total Incentive":this._formatCurrency(h),"Cap %":l,Term:c,"Payment Frequency":d,"Payment Start Date":this._formatDate(u),Plan:"","Data Type":"","Data Type Name":"","Account Type":"","Payroll Classification":p,Notes:`Installment ${a} of ${t}`});g=this._addMonths(g,e)}}}catch(t){console.error("Error calculating amortization for payee record:",e,t)}});return o},_prepareOverviewData(e,t){const o=[];e.forEach(e=>{try{const a=t.find(t=>t.product===e.product);if(!a){console.warn(`No setup found for product: ${e.product}. Skipping this record.`);return}let s;if(a.paymentStartDate){if(typeof a.paymentStartDate==="number"){s=this._excelDateToJSDate(a.paymentStartDate)}else{s=new Date(a.paymentStartDate)}}else{s=new Date}o.push({PayeeId:e.payeeId||"",OrderId:e.orderId||"",Product:e.product||"","Total Incentive":this._formatCurrency(e.totalIncentive||0),"Cap %":parseFloat(a.capPercent)||100,Term:parseInt(a.term)||12,"Payment Frequency":a.paymentFrequency||"Monthly","Payment Start Date":this._formatDate(s),Plan:"","Data Type":"","Data Type Name":"","Account Type":"","Payroll Classification":a.payrollClassification||"","Expense Start Date":"","Expense End Date":"",Notes:""})}catch(t){console.error("Error preparing overview for payee record:",e,t)}});return o},onSchedulePayeeFilterChange(e){this._applyScheduleFilters()},onScheduleProductFilterChange(e){this._applyScheduleFilters()},onSchedulePayrollClassificationFilterChange(e){this._applyScheduleFilters()},_applyScheduleFilters(){const e=this.getView().getModel();const t=this.getView().getModel("scheduleData");const o=e.getProperty("/scheduleOriginal")||t.getData();if(!e.getProperty("/scheduleOriginal")){e.setProperty("/scheduleOriginal",[...o])}const a=this.byId("schedulePayeeFilter");const s=this.byId("scheduleProductFilter");const r=this.byId("schedulePayrollClassificationFilter");const n=a?a.getSelectedKeys():[];const i=s?s.getSelectedKeys():[];const l=r?r.getSelectedKeys():[];const c=n&&n.length>0||i&&i.length>0||l&&l.length>0;if(!c){t.setData([...o]);e.setProperty("/isFiltered",false);e.setProperty("/currentFilter",null)}else{let a=[...o];if(n&&n.length>0){a=a.filter(e=>n.includes(e.PayeeId))}if(i&&i.length>0){a=a.filter(e=>i.includes(e.Product))}if(l&&l.length>0){a=a.filter(e=>l.includes(e["Payroll Classification"]))}t.setData(a);e.setProperty("/isFiltered",true);const s=[];if(n&&n.length>0){s.push(`Payee: ${n.join(", ")}`)}if(i&&i.length>0){s.push(`Product: ${i.join(", ")}`)}if(l&&l.length>0){s.push(`Classification: ${l.join(", ")}`)}e.setProperty("/currentFilter",s.join(" | "))}},onOverviewPayeeFilterChange(e){this._applyOverviewFilters()},onOverviewProductFilterChange(e){this._applyOverviewFilters()},onOverviewPayrollClassificationFilterChange(e){this._applyOverviewFilters()},_applyOverviewFilters(){const e=this.getView().getModel();const t=this.getView().getModel("overviewData");const o=e.getProperty("/overviewOriginal")||t.getData();if(!e.getProperty("/overviewOriginal")){e.setProperty("/overviewOriginal",[...o])}const a=this.byId("overviewPayeeFilter");const s=this.byId("overviewProductFilter");const r=this.byId("overviewPayrollClassificationFilter");const n=a?a.getSelectedKeys():[];const i=s?s.getSelectedKeys():[];const l=r?r.getSelectedKeys():[];const c=n&&n.length>0||i&&i.length>0||l&&l.length>0;if(!c){t.setData([...o])}else{let e=[...o];if(n&&n.length>0){e=e.filter(e=>n.includes(e.PayeeId))}if(i&&i.length>0){e=e.filter(e=>i.includes(e.Product))}if(l&&l.length>0){e=e.filter(e=>l.includes(e["Payroll Classification"]))}t.setData(e)}},async onFilterPress(){const e=this.getView().getModel();const t=e.getProperty("/overview");if(!t||t.length===0){a.warning("No data available to filter");return}const o=[...new Set(t.map(e=>e.PayeeId))].filter(Boolean);if(o.length===0){a.warning("No Payee IDs found in the data");return}const s=o.map(e=>({id:e}));e.setProperty("/payeeIds",s);this._aSelectedPayeeIds=[];if(!this._pFilterDialog){this._pFilterDialog=r.load({id:this.getView().getId(),name:"commissionsaccounting.view.fragments.FilterDialog",controller:this}).then(e=>{this.getView().addDependent(e);return e})}const n=await this._pFilterDialog;const i=this.byId("payeeIdMultiCombo");if(i){i.setSelectedKeys([])}n.open()},onPayeeIdSelectionChange(e){const t=e.getSource();const o=t.getSelectedItems();this._aSelectedPayeeIds=o.map(e=>e.getKey())},onApplyFilter(){if(!this._aSelectedPayeeIds||this._aSelectedPayeeIds.length===0){a.warning("Please select at least one Payee ID");return}const e=this.getView().getModel();const t=this.getView().getModel("scheduleData");const s=e.getProperty("/scheduleOriginal")||t.getData();if(!e.getProperty("/scheduleOriginal")){e.setProperty("/scheduleOriginal",[...s])}const r=s.filter(e=>this._aSelectedPayeeIds.includes(e.PayeeId));t.setData(r);e.setProperty("/isFiltered",true);e.setProperty("/currentFilter",this._aSelectedPayeeIds.join(", "));const n=this._aSelectedPayeeIds.length===1?`Filtered by Payee ID: ${this._aSelectedPayeeIds[0]}`:`Filtered by ${this._aSelectedPayeeIds.length} Payee IDs`;o.show(n);this._pFilterDialog.then(e=>{e.close()})},onClearFilter(){const e=this.getView().getModel();const t=this.getView().getModel("scheduleData");const a=e.getProperty("/scheduleOriginal");if(a){t.setData([...a])}e.setProperty("/isFiltered",false);e.setProperty("/currentFilter",null);this._aSelectedPayeeIds=[];const s=this.byId("payeeIdMultiCombo");if(s){s.setSelectedKeys([])}o.show("Filter cleared");this._pFilterDialog.then(e=>{e.close()})},onSetupProductChange(e){const t=e.getParameter("selectedItem").getKey();const o=this.getView().getModel();const a=o.getProperty("/overview");const s=a.filter(e=>e.Product===t);if(s.length>0){const e=s[0];o.setProperty("/setupForm",{selectedProduct:t,capPercent:e["Cap %"]||null,paymentStartDate:this._formatDateForPicker(e["Payment Start Date"])})}else{o.setProperty("/setupForm",{selectedProduct:t,capPercent:null,paymentStartDate:null})}},onSaveSetup(){const e=this.byId("productComboBox");const t=this.byId("totalIncentiveInput");const r=this.byId("termInput");const n=this.byId("paymentFrequencyComboBox");const i=this.byId("payrollClassificationComboBox");const l=this.byId("planInput");const c=this.byId("dataTypeComboBox");const d=this.byId("accountTypeComboBox");const p=this.byId("expenseStartDatePicker");const u=this.byId("expenseEndDatePicker");const h=e.getSelectedKey();const g=t.getValue();const y=r.getValue();const m=n.getSelectedKey();const f=i.getSelectedKey();const w=l.getValue();const S=c.getSelectedKey();const P=d.getSelectedKey();const v=p.getValue();const D=u.getValue();const I=parseFloat(g);const _=parseInt(y);if(isNaN(I)||I<=0){a.error("Total Incentive must be a positive number");return}if(isNaN(_)||_<=0){a.error("Term must be a positive integer");return}s.show(0);try{const e=this.getView().getModel();const t={product:h,capPercent:0,term:_,paymentFrequency:m,dataType:S,accountType:P,plan:w||"",payrollClassification:f,paymentStartDate:v};const r=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);fetch(`${r}/AmortizationSetups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{s.hide();if(!e.ok){throw new Error("Network response was not ok")}return e.json()}).then(e=>{this.rootId=e?.rootId;o.show("Amortization Setup saved successfully")}).catch(e=>{s.hide();a.error("Error saving Amortization Setup details:",e);console.error("Error saving Amortization Setup details:",e)})}catch(e){s.hide();a.error("Error saving setup: "+e.message)}},async getAllPeriods(){const e=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.tcmp.uri);try{fetch(`${e}/CS_V_PERIODS/CS_V_PERIODS?$filter=((PERIODTYPESEQ eq 2814749767106569 or PERIODTYPESEQ eq 2814749767106563 or PERIODTYPESEQ eq 2814749767106561) and REMOVEDATE eq 2200-01-01T00:00:00.0000000Z)`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok){throw new Error("Network response was not ok")}return e.json()}).then(e=>{const t=e.value||[];const o=t.map(e=>{const t=e.STARTDATE?e.STARTDATE.split("T")[0]:"";const o=e.ENDDATE?e.ENDDATE.split("T")[0]:"";return{...e,PERIOD_RANGE:`${t} to ${o}`}});this.getView().getModel("periodsData").setData(o)}).catch(e=>{a.error("Error fetching periods: "+e.message);console.error("Error fetching periods:",e)})}catch(e){a.error("Error fetching periods: "+e.message)}},async getAllProducts(){const e=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.tcmp.uri);try{fetch(`${e}/V_CS_PRODUCTID/V_CS_PRODUCTID`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok){throw new Error("Network response was not ok")}return e.json()}).then(e=>{const t=e.value||[];this.getView().getModel("productIds").setData(t)}).catch(e=>{a.error("Error fetching products: "+e.message);console.error("Error fetching products:",e)})}catch(e){a.error("Error fetching products: "+e.message)}},async getActiveDataSourceMappings(){const e=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);try{const t=await fetch(`${e}/DataSourceMappings`);if(!t.ok){throw new Error("Failed to fetch data source mappings")}const o=await t.json();const a=o.value||[];const s=a.filter(e=>e.isActive).sort((e,t)=>(e.position||0)-(t.position||0));const r=s.map(e=>({columnKey:e.columnKey,columnName:e.customLabel||e.defaultLabel,tableName:e.tableName,fieldName:e.fieldName,position:e.position}));const n=this.getView().getModel("columnConfig");n.setData(r);console.log("Active column configuration loaded:",r);this._buildDynamicSetupsTable()}catch(e){console.error("Error fetching active data source mappings:",e);a.error("Failed to load column configuration: "+e.message)}},_buildDynamicSetupsTable(){const e=this.getView().getModel("columnConfig").getData();const t=this.byId("currentSetupsTable");if(!t||!e||e.length===0){console.warn("Cannot build dynamic table: table or column config not available");return}t.removeAllColumns();e.forEach(e=>{const o=new n({width:"auto",header:new i({text:e.columnName})});t.addColumn(o)});t.bindItems({path:"currentSetups>/",factory:this._createSetupRowFactory.bind(this)});console.log(`Dynamic table built with ${e.length} columns`)},async onRefreshSetupTable(){s.show(0);try{await this.getActiveDataSourceMappings();this._buildDynamicSetupsTable();o.show("Setup table refreshed with latest configuration")}catch(e){console.error("Error refreshing setup table:",e);a.error("Failed to refresh table: "+e.message)}finally{s.hide()}},_createSetupRowFactory(e,t){const o=this.getView().getModel("columnConfig").getData();const a=[];o.forEach(e=>{const t=e.tableName&&e.fieldName;let o;if(t){o=new d({selectedKey:`{currentSetups>${e.columnKey}}`,editable:"{currentSetups>editable}",placeholder:`Select ${e.columnName}`});o.data("tableName",e.tableName);o.data("fieldName",e.fieldName);o.data("columnKey",e.columnKey)}else{o=new l({value:`{currentSetups>${e.columnKey}}`,editable:"{currentSetups>editable}"})}a.push(o)});const s=new c(e,{cells:a,type:"Active"});s.attachPress(this.onSetupRowSelect,this);return s},async _loadAllDropdownData(){const e=this.getView().getModel("columnConfig").getData();if(!e||e.length===0){return}const t=[];const o=new Set;e.forEach(e=>{if(e.tableName&&e.fieldName){const a=`${e.tableName}_${e.fieldName}`;if(!o.has(a)&&!this._dropdownCache[a]){o.add(a);t.push({tableName:e.tableName,fieldName:e.fieldName,cacheKey:a})}}});if(t.length===0){this._populateAllComboBoxes();return}s.show(0);try{const e=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.tcmp.uri);const o=t.map(async t=>{try{const o=`V_${t.tableName}/V_${t.tableName}`;const a=await fetch(`${e}/${o}`);if(!a.ok){throw new Error(`Failed to fetch ${o}`)}const s=await a.json();const r=s.value||[];const n=[...new Set(r.map(e=>e[t.fieldName]))].filter(Boolean);this._dropdownCache[t.cacheKey]=n;console.log(`Loaded ${n.length} values for ${t.tableName}.${t.fieldName}`)}catch(e){console.error(`Error loading ${t.tableName}.${t.fieldName}:`,e)}});await Promise.all(o);this._populateAllComboBoxes()}catch(e){console.error("Error loading dropdown data:",e);a.error("Failed to load dropdown options: "+e.message)}finally{s.hide()}},_populateAllComboBoxes(){const e=this.byId("currentSetupsTable");if(!e){return}const t=e.getItems();t.forEach(e=>{const t=e.getCells();t.forEach(e=>{if(e instanceof d){const t=e.data("tableName");const o=e.data("fieldName");if(t&&o){const a=`${t}_${o}`;const s=this._dropdownCache[a];if(s&&s.length>0){e.removeAllItems();s.forEach(t=>{e.addItem(new sap.ui.core.Item({key:t,text:t}))})}}}})})},async getCurrentSetups(){const e=this.getView().getModel();const t=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);try{fetch(`${t}/AmortizationSetups`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok){throw new Error("Network response was not ok")}return e.json()}).then(e=>{this.getView().getModel("currentSetups").setData(e.value||[])}).catch(e=>{a.error("Error fetching current setups: "+e.message);console.error("Error fetching current setups:",e)})}catch(e){a.error("Error fetching current setups: "+e.message)}},onCancelSetup(){a.confirm("Are you sure you want to clear the setup details?",{title:"Confirm",onClose:e=>{if(e===a.Action.OK){this._clearSetupForm();o.show("Form cleared")}}})},_clearSetupForm(){this.byId("productComboBox").setSelectedKey("");this.byId("totalIncentiveInput").setValue("");this.byId("termInput").setValue("");this.byId("paymentFrequencyComboBox").setSelectedKey("");this.byId("payrollClassificationComboBox").setSelectedKey("");this.byId("planInput").setValue("");this.byId("dataTypeComboBox").setSelectedKey("");this.byId("accountTypeComboBox").setSelectedKey("");this.byId("expenseStartDatePicker").setValue("");this.byId("expenseEndDatePicker").setValue("")},onResetSetup(){const e=this.getView().getModel();const t=e.getProperty("/setupForm");const a=t.selectedProduct;if(!a){return}const s=e.getProperty("/overview");const r=s.find(e=>e.Product===a);if(r){e.setProperty("/setupForm",{selectedProduct:a,capPercent:r["Cap %"]||null,paymentStartDate:this._formatDateForPicker(r["Payment Start Date"])});o.show("Form reset to original values")}},_formatDateForPicker(e){if(!e){return null}let t;if(typeof e==="number"){t=this._excelDateToJSDate(e)}else{t=new Date(e)}const o=t.getFullYear();const a=String(t.getMonth()+1).padStart(2,"0");const s=String(t.getDate()).padStart(2,"0");return`${o}-${a}-${s}`},async onAddSetup(){const e=this.getView().getModel("columnConfig").getData();if(!e||e.length===0){a.warning("Please configure data source mappings first.");return}const t=this.getView().getModel("currentSetups").getData();const s=t||[];const r={editable:true};e.forEach(e=>{r[e.columnKey]=""});s.push(r);this.getView().getModel("currentSetups").setData(s);this.getView().getModel("currentSetups").refresh();await this._loadAllDropdownData();o.show("New setup row added")},onSetupRowSelect(e){const t=this.getView().getModel();const o=e.getSource();const a=o.getBindingContext();const s=a.getPath();const r=parseInt(s.split("/").pop());t.setProperty("/selectedSetupIndex",r)},onEditSetup(){const e=this.getView().getModel();const t=e.getProperty("/selectedSetupIndex");if(t===undefined){o.show("Please select a row to edit");return}e.setProperty(`/currentSetups/${t}/editable`,true);o.show("Row is now editable")},async onUploadSetups(){if(!this._pUploadSetupDialog){this._pUploadSetupDialog=r.load({id:this.getView().getId(),name:"commissionsaccounting.view.fragments.UploadSetupDialog",controller:this}).then(e=>{this.getView().addDependent(e);return e})}const e=await this._pUploadSetupDialog;e.open()},onSetupFileSelect(e){const t=e.getParameter("files")&&e.getParameter("files")[0];if(t){this._oSelectedSetupFile=t}else{this._oSelectedSetupFile=null}},async onUploadSetupFile(){if(!this._oSelectedSetupFile){a.warning("Please select a file to upload");return}if(!this._oSelectedSetupFile.name.match(/\.(xlsx|xls)$/)){a.error("Please upload a valid Excel file (.xlsx or .xls)");return}if(!window.XLSX){a.error("Excel processing library is still loading. Please try again in a moment.");return}const e=this.getView().getModel("columnConfig").getData();if(!e||e.length===0){a.warning("Please configure data source mappings first.");return}s.show(0);try{const t=await this._readFileAsArrayBuffer(this._oSelectedSetupFile);const r=XLSX.read(new Uint8Array(t),{type:"array"});const n=r.Sheets[r.SheetNames[0]];const i=XLSX.utils.sheet_to_json(n);if(i.length===0){a.warning("The uploaded Excel file is empty");s.hide();return}const l=e.map(e=>e.columnName);const c=i[0];const d=l.filter(e=>!(e in c));if(d.length>0){a.error(`Missing required columns: ${d.join(", ")}`);s.hide();return}const p=i.map(t=>{const o={editable:false};e.forEach(e=>{let a=t[e.columnName];if(e.columnKey.toLowerCase().includes("date")&&a){a=this._formatDateForPicker(a)}o[e.columnKey]=a||""});return o});const u=this.getView().getModel("currentSetups");u.setData(p);o.show(`Successfully uploaded ${i.length} setup(s)`);this.onCloseUploadSetupDialog()}catch(e){a.error("Error processing setup file: "+e.message)}finally{s.hide()}},onCloseUploadSetupDialog(){this._pUploadSetupDialog.then(e=>{e.close();const t=this.byId("setupFileUploader");if(t){t.clear()}this._oSelectedSetupFile=null})},onDeleteSetup(e){const t=e.getParameter("listItem");const r=t.getBindingContext("currentSetups");const n=r.getObject();const i=n.product;a.confirm(`Are you sure you want to delete the setup for this product: ${i}?`,{title:"Confirm Deletion",onClose:async e=>{if(e===a.Action.OK){s.show(0);try{const e=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);const t=await fetch(`${e}/deleteAmortizationSetupByProduct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product:i})});if(!t.ok){throw new Error(`HTTP error! status: ${t.status}`)}await t.json();const a=this.getView().getModel("currentSetups");const s=a.getData();const r=s.indexOf(n);if(r>-1){s.splice(r,1);a.setData(s);a.refresh()}o.show(`Setup for product "${i}" deleted successfully`)}catch(e){a.error(`Failed to delete setup: ${e.message}`)}finally{s.hide()}}}})},async onSaveSetups(){const e=this.getView().getModel("currentSetups");const t=e.getData()||[];if(t.length===0){a.warning("No setups to save");return}s.show(0);try{const a=t.map(e=>({product:e.product,capPercent:e.capPercent?parseInt(e.capPercent):null,term:parseInt(e.term),paymentFrequency:e.paymentFrequency,dataType:e.dataType,accountType:e.accountType,plan:e.plan||null,payrollClassification:e.payrollClassification,paymentStartDate:e.paymentStartDate}));const r=this.getOwnerComponent().getManifestObject().resolveUri(this.getOwnerComponent().getManifestEntry("sap.app").dataSources.mainService.uri);const n=await fetch(`${r}/saveAmortizationSetup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setupData:a})});if(!n.ok){throw new Error(`HTTP error! status: ${n.status}`)}const i=await n.json();const l=t.map(e=>({...e,editable:false}));e.setProperty("/currentSetups",l);e.setProperty("/selectedSetupIndex",undefined);o.show("Setups saved successfully");s.hide()}catch(e){s.hide();a.error(`Failed to save setups: ${e.message}`)}}})});
sap.ui.predefine("commissionsaccounting/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"commissionsaccounting/i18n/i18n.properties":'# This is the resource bundle for commissionsaccounting\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Commissions Accounting\n\n#YDES: Application description\nappDescription=Commissions Accounting\n#XTIT: Main view title\ntitle=Commissions Accounting\n\n#XFLD,66\namortization-manage.flpTitle=Commissions Accounting\n',
	"commissionsaccounting/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"commissionsaccounting","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.20.0","toolsId":"85d2ff7d-4479-49da-abf2-e89bb6129d91"},"dataSources":{"mainService":{"uri":"/amortization-srv/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}},"tcmp":{"uri":"tcmp/api/v1/datasphere/consumption/relational/SYZYGYDEV","type":"OData","settings":{"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"amortization-manage":{"semanticObject":"amortization","action":"manage","title":"{{amortization-manage.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.143.2","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"commissionsaccounting.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"commissionsaccounting.view","async":true,"viewPath":"commissionsaccounting.view"},"routes":[{"name":"RouteMain","pattern":":?query:","target":["TargetMain"]}],"targets":{"TargetMain":{"id":"Main","name":"Main"}}},"rootView":{"viewName":"commissionsaccounting.view.App","type":"XML","id":"App","async":true},"flexBundle":false},"sap.cloud":{"public":true,"service":"comm_acct"}}',
	"commissionsaccounting/view/App.view.xml":'<mvc:View controllerName="commissionsaccounting.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"commissionsaccounting/view/Main.view.xml":'<mvc:View xmlns:tnt="sap.tnt" controllerName="commissionsaccounting.controller.Main"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:uxap="sap.uxap"\n    xmlns:unified="sap.ui.unified"\n    xmlns:layout="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:codeeditor="sap.ui.codeeditor"><tnt:ToolPage id="idToolPage" sideExpanded="false"><tnt:header><tnt:ToolHeader ><Button id="idToggleMenu" icon="sap-icon://menu2" type="Transparent" press="onToggleMenuPress"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Button><ToolbarSpacer/></tnt:ToolHeader></tnt:header><tnt:sideContent><tnt:SideNavigation expanded="true" selectedKey="amortizationDetails" itemPress="onSideNavItemPress" itemSelect="onSideNavItemSelect"><tnt:NavigationList ><tnt:NavigationListItem id="idAmortizationDetails" press="onAmortizationDetailsPress" text="Amortization Details" key="amortizationDetails" icon="sap-icon://loan"/><tnt:NavigationListItem id="idConfigureApp" press="onConfigureAppPress" text="Configuration" key="configAmortization" icon="sap-icon://developer-settings"/></tnt:NavigationList></tnt:SideNavigation></tnt:sideContent><tnt:mainContents><NavContainer id="idNavContainer" initialPage="amortizationDetails" class="sapUiContentPadding"><pages><uxap:ObjectPageLayout id="amortizationDetails" useIconTabBar="true"><uxap:headerTitle><uxap:ObjectPageDynamicHeaderTitle><uxap:expandedHeading><HBox alignItems="Center"><core:Icon src="sap-icon://money-bills" size="2rem" color="#0854A0" class="sapUiTinyMarginEnd" /><Title text="Amortization Details" /></HBox></uxap:expandedHeading><uxap:snappedHeading><HBox alignItems="Center"><core:Icon src="sap-icon://money-bills" size="1.5rem" color="#0854A0" class="sapUiTinyMarginEnd" /><Title text="Amortization Details" /></HBox></uxap:snappedHeading><uxap:actions><ComboBox\n                                        id="periodsComboBox"\n                                        showSecondaryValues="true"\n                                        items="{periodsData>/}"\n                                        placeholder="Select Period to run Amortization"\n                                        width="300px"><core:ListItem key="{periodsData>NAME}" text="{periodsData>NAME}" additionalText="{periodsData>PERIOD_RANGE}" /></ComboBox><Button text="Execute Amortization" type="Success" icon="sap-icon://play" press=".onExecuteAmortizationPress" /><Button type="Ghost" icon="sap-icon://download" visible="false" text="Download Amortization Template" press=".onDownloadAmortizationTemplatePress"></Button><Button type="Ghost" icon="sap-icon://upload" visible="false" text="Upload Amortization Data" press=".onUploadAmortizationDataPress"></Button></uxap:actions></uxap:ObjectPageDynamicHeaderTitle></uxap:headerTitle><uxap:sections><uxap:ObjectPageSection title="Amortization Schedule" titleUppercase="false"><uxap:subSections><uxap:ObjectPageSubSection><VBox><Toolbar visible="{= ${scheduleData>/}.length > 0 }"><Label text="Filters:" class="sapUiTinyMarginEnd"/><MultiComboBox\n                                                    id="schedulePayeeFilter"\n                                                    width="200px"\n                                                    items="{/schedulePayeeIds}"\n                                                    selectionChange=".onSchedulePayeeFilterChange"\n                                                    placeholder="Payee ID"><core:Item key="{id}" text="{id}" /></MultiComboBox><MultiComboBox\n                                                    id="scheduleProductFilter"\n                                                    width="200px"\n                                                    items="{/scheduleProducts}"\n                                                    selectionChange=".onScheduleProductFilterChange"\n                                                    placeholder="Product"\n                                                    class="sapUiTinyMarginBegin"><core:Item key="{id}" text="{id}" /></MultiComboBox><MultiComboBox\n                                                    id="schedulePayrollClassificationFilter"\n                                                    width="200px"\n                                                    items="{/schedulePayrollClassifications}"\n                                                    selectionChange=".onSchedulePayrollClassificationFilterChange"\n                                                    placeholder="Payroll Classification"\n                                                    class="sapUiTinyMarginBegin"><core:Item key="{id}" text="{id}" /></MultiComboBox><ToolbarSpacer /><Button \n                                                    text="Refresh"\n                                                    icon="sap-icon://refresh"\n                                                    press=".onRefreshSchedule"\n                                                    type="Ghost"\n                                                    tooltip="Recalculate with latest setup data" /><Button \n                                                    text="Download Schedule" \n                                                    icon="sap-icon://excel-attachment" \n                                                    press=".onDownloadSchedulePress"\n                                                    type="Ghost" /><Text text="Total Records: {= ${scheduleData>/}.length }" class="sapUiSmallMarginEnd" /></Toolbar><Table id="scheduleTable" items="{scheduleData>/}" noDataText=" " alternateRowColors="false"><columns><Column><Text text="PayeeId" /></Column><Column><Text text="OrderId" /></Column><Column><Text text="Customer" /></Column><Column><Text text="Product" /></Column><Column><Text text="Amount" /></Column><Column><Text text="Cap %" /></Column><Column><Text text="Term" /></Column><Column><Text text="Amortization Frequency" /></Column><Column><Text text="Amortization Start Date" /></Column><Column><Text text="Payroll Classification" /></Column><Column><Text text="Expense Start Date" /></Column><Column><Text text="Expense End Date" /></Column><Column><Text text="Notes" /></Column></columns><items><ColumnListItem><cells><Text text="{scheduleData>PayeeId}" /><Text text="{scheduleData>OrderId}" /><Text text="{scheduleData>Customer}" /><Text text="{scheduleData>Product}" /><Text text="{scheduleData>Total Incentive}" /><Text text="{scheduleData>Cap %}" /><Text text="{scheduleData>Term}" /><Text text="{scheduleData>Payment Frequency}" /><Text text="{scheduleData>Payment Start Date}" /><Text text="{scheduleData>Payroll Classification}" /><Text text="{scheduleData>Expense Start Date}" /><Text text="{scheduleData>Expense End Date}" /><Text text="{scheduleData>Notes}" /></cells></ColumnListItem></items></Table><IllustratedMessage\n                                                visible="{= ${scheduleData>/}.length === 0 }"\n                                                illustrationType="sapIllus-EmptyCalendar"\n                                                title="No Schedule Generated"\n                                                description="Amortization schedule will be generated after uploading commission data"\n                                                illustrationSize="Auto" ><additionalContent><Button type="Success" visible="false" icon="sap-icon://play" text="Execute Amortization" press=".onExecuteAmortizationPress"></Button><Button class="sapUiTinyMarginBegin" visible="false" type="Ghost" icon="sap-icon://download" text="Download Amortization Template" press=".onDownloadAmortizationTemplatePress"></Button><Button class="sapUiTinyMarginBegin" visible="false" type="Ghost" icon="sap-icon://upload" text="Upload Amortization Data" press=".onUploadAmortizationDataPress"></Button></additionalContent></IllustratedMessage></VBox></uxap:ObjectPageSubSection><uxap:ObjectPageSubSection title="Edit Schedule"></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="Overview" titleUppercase="false"><uxap:subSections><uxap:ObjectPageSubSection><VBox><Toolbar visible="{= ${overviewData>/}.length > 0 }"><Label text="Filters:" class="sapUiTinyMarginEnd"/><MultiComboBox\n                                                    id="overviewPayeeFilter"\n                                                    width="200px"\n                                                    items="{/overviewPayeeIds}"\n                                                    selectionChange=".onOverviewPayeeFilterChange"\n                                                    placeholder="Payee ID"><core:Item key="{id}" text="{id}" /></MultiComboBox><MultiComboBox\n                                                    id="overviewProductFilter"\n                                                    width="200px"\n                                                    items="{/overviewProducts}"\n                                                    selectionChange=".onOverviewProductFilterChange"\n                                                    placeholder="Product"\n                                                    class="sapUiTinyMarginBegin"><core:Item key="{id}" text="{id}" /></MultiComboBox><MultiComboBox\n                                                    id="overviewPayrollClassificationFilter"\n                                                    width="200px"\n                                                    items="{/overviewPayrollClassifications}"\n                                                    selectionChange=".onOverviewPayrollClassificationFilterChange"\n                                                    placeholder="Payroll Classification"\n                                                    class="sapUiTinyMarginBegin"><core:Item key="{id}" text="{id}" /></MultiComboBox><ToolbarSpacer /><Button \n                                                    text="Refresh"\n                                                    icon="sap-icon://refresh"\n                                                    press=".onRefreshSchedule"\n                                                    type="Ghost"\n                                                    tooltip="Recalculate with latest setup data" /><Text text="Total Records: {= ${overviewData>/}.length }" class="sapUiSmallMarginEnd" /></Toolbar><Table id="overviewTable" items="{overviewData>/}" noDataText=" " alternateRowColors="false"><columns><Column><Text text="PayeeId" /></Column><Column><Text text="Customer" /></Column><Column><Text text="Product" /></Column><Column><Text text="Total Incentive" /></Column><Column><Text text="Cap %" /></Column><Column><Text text="Term" /></Column><Column><Text text="Amortization Frequency" /></Column><Column><Text text="Amortization Start Month" /></Column><Column><Text text="Payroll Classification" /></Column></columns><items><ColumnListItem><cells><Text text="{overviewData>PayeeId}" /><Text text="{overviewData>Customer}" /><Text text="{overviewData>Product}" /><Text text="{overviewData>Total Incentive}" /><Text text="{overviewData>Cap %}" /><Text text="{overviewData>Term}" /><Text text="{overviewData>Payment Frequency}" /><Text text="{overviewData>Payment Start Date}" /><Text text="{overviewData>Payroll Classification}" /></cells></ColumnListItem></items></Table><IllustratedMessage\n                                                visible="{= ${overviewData>/}.length === 0 }"\n                                                illustrationType="sapIllus-EmptyList"\n                                                title="No Data Available"\n                                                description="Upload an Excel file to view commission data"\n                                                illustrationSize="Auto"><additionalContent><Button type="Success" visible="false" icon="sap-icon://play" text="Execute Amortization" press=".onExecuteAmortizationPress"></Button><Button class="sapUiTinyMarginBegin" visible="false"  type="Ghost" icon="sap-icon://download" text="Download Amortization Template" press=".onDownloadAmortizationTemplatePress"></Button><Button class="sapUiTinyMarginBegin" visible="false"  type="Ghost" icon="sap-icon://upload" text="Upload Amortization Data" press=".onUploadAmortizationDataPress"></Button></additionalContent></IllustratedMessage></VBox></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection></uxap:sections></uxap:ObjectPageLayout><uxap:ObjectPageLayout id="configAmortization" useIconTabBar="true" subSectionLayout="TitleOnLeft" navigate="onConfigSubSectionChange"><uxap:headerTitle><uxap:ObjectPageDynamicHeaderTitle><uxap:expandedHeading><HBox alignItems="Center"><core:Icon src="sap-icon://developer-settings" size="2rem" color="#0854A0" class="sapUiTinyMarginEnd" /><Title text="Configure Amortization" /></HBox></uxap:expandedHeading><uxap:snappedHeading><HBox alignItems="Center"><core:Icon src="sap-icon://developer-settings" size="1.5rem" color="#0854A0" class="sapUiTinyMarginEnd" /><Title text="Configure Amortization" /></HBox></uxap:snappedHeading></uxap:ObjectPageDynamicHeaderTitle></uxap:headerTitle><uxap:sections><uxap:ObjectPageSection title="Setup" titleUppercase="false"><uxap:subSections><uxap:ObjectPageSubSection><VBox class="sapUiSmallMargin"><core:Fragment fragmentName="commissionsaccounting.view.fragments.CurrentSetups" type="XML" /></VBox></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="Data Source Mapping" titleUppercase="false"><uxap:subSections><uxap:ObjectPageSubSection><VBox class="sapUiSmallMargin"><core:Fragment fragmentName="commissionsaccounting.view.fragments.DataSourceMapping" type="XML" /></VBox></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="Amortization Calculation" visible="false" titleUppercase="false"><uxap:subSections><uxap:ObjectPageSubSection><VBox class="sapUiSmallMargin"><codeeditor:CodeEditor\n                                                id="amortizationCodeEditor"\n                                                type="javascript"\n                                                height="400px"\n                                                width="100%"\n                                                lineNumbers="true"\n                                                value=""\n                                                syntaxHints="true" /></VBox></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection></uxap:sections></uxap:ObjectPageLayout></pages></NavContainer></tnt:mainContents></tnt:ToolPage></mvc:View>',
	"commissionsaccounting/view/fragments/CurrentSetups.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Table id="currentSetupsTable" \n           mode="Delete"\n           delete="onDeleteSetup"><headerToolbar><OverflowToolbar><Title text="Current Setups" level="H2"/><ToolbarSpacer/><Button text="Download Template" icon="sap-icon://download" press="onDownloadSetupTemplatePress" type="Ghost" /><Button id="idUpload" text="Upload" icon="sap-icon://upload" type="Ghost" press="onUploadSetups"/><Button id="addSetupBtn" text="Add" icon="sap-icon://add" press="onAddSetup"/><Button id="saveSetupsBtn" text="Save" icon="sap-icon://save" press="onSaveSetups" type="Emphasized"/><Button text="" icon="sap-icon://refresh" press="onRefreshSetupTable" type="Ghost" /></OverflowToolbar></headerToolbar></Table></core:FragmentDefinition>',
	"commissionsaccounting/view/fragments/DataSourceMapping.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Toolbar><Title text="" level="H2" /><ToolbarSpacer /><Button \n                text="Save Changes" \n                icon="sap-icon://save" \n                type="Success"\n                press=".onSaveDataSourceMapping" /></Toolbar><Table \n            id="dataSourceMappingTable" \n            items="{dataSources>/}"\n            alternateRowColors="true"><columns><Column width="12em"><Text text="Column Name" /></Column><Column width="12em"><Text text="Default Label" /></Column><Column width="15em"><Text text="Custom Label" /></Column><Column width="10em"><Text text="Position" /></Column><Column width="25em"><Text text="Table Name" /></Column><Column width="25em"><Text text="Field Name" /></Column><Column width="8em" hAlign="Center"><Text text="Active" /></Column></columns><items><ColumnListItem><cells><Text text="{dataSources>columnName}" /><Text text="{dataSources>defaultLabel}" /><Input \n                            value="{dataSources>customLabel}" \n                            placeholder="Enter custom label" /><Input \n                            value="{dataSources>position}"\n                            type="Number"\n                            placeholder="Enter position" /><ComboBox \n                            width="100%"\n                            selectedKey="{dataSources>tableName}"\n                            items="{tableNames>/}"\n                            placeholder="Select table"\n                            change=".onTableNameChange"><core:Item key="{tableNames>TABLE_NAME}" text="{tableNames>TABLE_NAME}" /></ComboBox><ComboBox \n                            width="100%"\n                            selectedKey="{dataSources>fieldName}"\n                            items="{dataSources>_fieldNames}"\n                            placeholder="Select field"><core:Item key="{dataSources>COLUMN_NAME}" text="{dataSources>COLUMN_NAME}" /></ComboBox><Switch \n                            state="{dataSources>isActive}"\n                            customTextOn=" "\n                            customTextOff=" " /></cells></ColumnListItem></items></Table></core:FragmentDefinition>\n',
	"commissionsaccounting/view/fragments/SetupForm.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:form="sap.ui.layout.form"><form:SimpleForm \n        editable="true"\n        layout="ColumnLayout"\n        columnsM="2"\n        columnsL="2"\n        columnsXL="2"><form:content><Label text="Product" required="true" /><ComboBox\n                id="productComboBox"\n                placeholder="Select Product"><core:Item key="Cloud" text="Cloud" /><core:Item key="On-Prem" text="On-Prem" /><core:Item key="Others" text="Others" /></ComboBox><Label visible="false" text="Total Incentive" required="true" /><Input\n                id="totalIncentiveInput"\n                visible="false"\n                type="Number"\n                placeholder="Enter amount" /><Label text="Term" required="true" /><Input\n                id="termInput"\n                type="Number"\n                placeholder="Enter term" /><Label text="Payment Frequency" required="true" /><ComboBox \n                id="paymentFrequencyComboBox"\n                placeholder="Select Frequency"><core:Item key="Monthly" text="Monthly" /><core:Item key="Quarterly" text="Quarterly" /><core:Item key="Bi-Weekly" text="Bi-Weekly" /></ComboBox><Label text="Payroll Classification" required="true" /><ComboBox \n                id="payrollClassificationComboBox"\n                placeholder="Select Classification"><core:Item key="Deferred" text="Deferred" /><core:Item key="Non-Deferred" text="Non-Deferred" /></ComboBox><Label text="Plan" /><Input \n                id="planInput"\n                placeholder="Enter plan" /><Label text="Data Type" required="true" /><ComboBox \n                id="dataTypeComboBox"\n                placeholder="Select Data Type"><core:Item key="Products" text="Products" /></ComboBox><Label text="Account Type" required="true" /><ComboBox \n                id="accountTypeComboBox"\n                placeholder="Select Account Type"><core:Item key="FIN" text="FIN" /></ComboBox><Label text="Payment Start Date" required="true" /><DatePicker\n                id="expenseStartDatePicker"\n                placeholder="Select start date"\n                displayFormat="MM/dd/yyyy"\n                valueFormat="yyyy-MM-dd" /><Label text="Payment End Date" visible="false" required="true" /><DatePicker\n                visible="false"\n                id="expenseEndDatePicker"\n                placeholder="Select end date"\n                displayFormat="MM/dd/yyyy"\n                valueFormat="yyyy-MM-dd" /></form:content></form:SimpleForm><Toolbar class="sapUiSmallMarginTop"><ToolbarSpacer /><Button \n            text="Cancel" \n            press=".onCancelSetup"\n            type="Transparent" /><Button \n            text="Save" \n            press=".onSaveSetup"\n            type="Emphasized" /></Toolbar></core:FragmentDefinition>',
	"commissionsaccounting/view/fragments/UploadAmortizationDialog.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:unified="sap.ui.unified"><Dialog\n        title="Upload Amortization Data"\n        contentWidth="500px"\n        contentHeight="200px"><content><VBox class="sapUiSmallMargin"><Label text="Select Amortization Data File (.xlsx or .xls):" class="sapUiTinyMarginBottom" /><unified:FileUploader\n                    id="amortizationFileUploader"\n                    width="100%"\n                    fileType="xlsx,xls"\n                    change=".onAmortizationFileSelect"\n                    placeholder="Choose a file..." /><Text text="Note: Please upload the Amortization Template with your data filled in." class="sapUiTinyMarginTop" /></VBox></content><beginButton><Button\n                text="Upload"\n                type="Emphasized"\n                press=".onUploadAmortizationFile" /></beginButton><endButton><Button\n                text="Cancel"\n                press=".onCloseUploadAmortizationDialog" /></endButton></Dialog></core:FragmentDefinition>\n',
	"commissionsaccounting/view/fragments/UploadSetupDialog.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:upload="sap.ui.unified"><Dialog\n        id="uploadSetupDialog"\n        title="Upload Setup Data"\n        contentWidth="500px"><content><VBox class="sapUiSmallMargin"><Label text="Select Excel File" required="true" /><upload:FileUploader\n                    id="setupFileUploader"\n                    name="setupFile"\n                    uploadUrl="upload"\n                    placeholder="Choose a file..."\n                    change=".onSetupFileSelect"\n                    fileType="xlsx,xls"\n                    width="100%" /><Text class="sapUiTinyMarginTop" text="Upload the Setup Template with your setup data" /></VBox></content><beginButton><Button text="Upload" press=".onUploadSetupFile" type="Emphasized" /></beginButton><endButton><Button text="Cancel" press=".onCloseUploadSetupDialog" /></endButton></Dialog></core:FragmentDefinition>\n'
});
//# sourceMappingURL=Component-preload.js.map
